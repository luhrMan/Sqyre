{
  "name": "Sqyre (Linux build)",
  "build": {
    "dockerfile": "Dockerfile",
    "context": ".."
  },
  "workspaceFolder": "/workspace",
  "workspaceMount": "source=${localWorkspaceFolder},target=/workspace,type=bind",
  "features": {
    "ghcr.io/devcontainers/features/docker-in-docker:2": {}
  },
  "containerEnv": {"GOFLAGS": "-tags=gocv_specific_modules"},
  "customizations": {
    "vscode": {
      "tasks": [
        {
          "label": "Build Linux",
          "type": "shell",
          "command": "go build -o builds/linux ./cmd/sqyre",
          "group": { "kind": "build", "isDefault": true },
          "presentation": { "reveal": "silent", "panel": "shared" }
        },
        {
          "label": "Build Linux (current dir)",
          "type": "shell",
          "command": "go build -o sqyre ./cmd/sqyre",
          "group": "build"
        }
      ]
    }
  },
  "postCreateCommand": "go mod download",
  "remoteUser": "root"
}
